<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>èŒä¸šä¼˜åŠ¿æ¢ç´¢æµ‹è¯„</title>
<style>
body{
  font-family:"Helvetica Neue",Arial;
  background: linear-gradient(135deg,#eef2ff,#f8fafc);
  margin:0; padding:0; color:#333;
}
.container{
  max-width:800px;
  margin:40px auto;
  background:white;
  padding:40px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
  overflow:hidden;
}
h1,h2{
  text-align:center;
}
button{
  background:#4f46e5;
  color:white;
  border:none;
  padding:12px 20px;
  border-radius:8px;
  cursor:pointer;
  margin-top:20px;
  font-size:16px;
  transition:0.3s;
}
button:hover{background:#4338ca;}
.option{margin:8px 0;padding:8px;}
.hidden{display:none;}
.blur{filter: blur(6px);}
.fade{
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}
.card{
  background:#f9fafb;
  border-radius:10px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 2px 8px rgba(0,0,0,0.05);
  transition: transform 0.3s;
}
.card.active{transform: translateX(0);}
.card.inactive{transform: translateX(120%); opacity:0;}
input[type="text"]{
  width:calc(100% - 20px);
  padding:8px;
  border-radius:6px;
  border:1px solid #ccc;
  margin-bottom:15px;
}
.progress-bar{
  height:8px;
  background:#e0e0e0;
  border-radius:4px;
  margin-bottom:20px;
  overflow:hidden;
}
.progress{
  height:8px;
  background:#4f46e5;
  width:0%;
  transition:0.3s;
}
</style>
</head>
<body>
<div class="container">

<!-- STEP1 -->
<div id="step1">
<h1>èŒä¸šä¼˜åŠ¿æ¢ç´¢æµ‹è¯„</h1>
<p>æ¬¢è¿å‚åŠ æœ¬æ¬¡ä¼˜åŠ¿æ¢ç´¢æµ‹è¯•ã€‚æœ¬æµ‹è¯•ä¸ºåˆæ­¥æ¢ç´¢ç‰ˆæœ¬ï¼Œå‚è€ƒä¼˜åŠ¿ç†è®ºè®¾è®¡ã€‚<br>
éƒ¨åˆ†é¢˜ç›®ä¸ºâ€œç¬¦åˆ / ä¸ç¬¦åˆâ€ä¸¤é€‰ä¸€ï¼Œéƒ¨åˆ†é¢˜ç›®ä¸ºå››é€‰ä¸€ã€‚æ— éœ€è¿‡åº¦æ€è€ƒï¼Œé€‰æ‹©æ›´åå‘ä½ çš„ä¸€é¡¹å³å¯ã€‚<br>
å¯åœ¨æœªæ¥ä¸åŒé˜¶æ®µé‡å¤æµ‹è¯•ï¼Œå¯¹æ¯”å˜åŒ–ã€‚</p>
<button onclick="nextStep(2)">å¼€å§‹æµ‹è¯• â†’</button>
</div>

<!-- STEP2 -->
<div id="step2" class="hidden">
<h2>ç¬¬äºŒæ­¥ï¼šäº†è§£ä½ çš„ç°çŠ¶</h2>
<p>ä½ ç›®å‰æœ€æƒ³è§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæœ€å¤šé€‰æ‹©3é¡¹ï¼‰</p>
<div class="option"><input type="checkbox" name="pain"> ğŸ˜© æ¯å¤©ä¸Šç­åƒä¸ŠåŸï¼Œä¸¥é‡å€¦æ€ ï¼Œæ„ä¹‰æ„ŸåŒ®ä¹</div>
<div class="option"><input type="checkbox" name="pain"> ğŸ”„ èŒåœºç“¶é¢ˆæœŸï¼Œæƒ³æ”¹å˜å´ä¸æ•¢è£¸è¾</div>
<div class="option"><input type="checkbox" name="pain"> ğŸŒ ç•™å­¦æƒ³æ³•å¾ˆå¤šï¼Œä½†å¯¹æ”¿ç­–/æ‹©æ ¡/ä¸“ä¸šä¸äº†è§£</div>
<div class="option"><input type="checkbox" name="pain"> ğŸ“ ä¸æ¸…æ¥šç•™å­¦ä¸èŒä¸šå¦‚ä½•è¡”æ¥</div>
<div class="option"><input type="checkbox" name="pain"> ğŸ‘©â€ğŸ« æ•™å¸ˆèµ›é“å—é™ï¼Œæƒ³è½¬å‹å›½é™…æ•™è‚²/æµ·å¤–è·¯å¾„</div>
<div class="option"><input type="checkbox" name="pain"> ğŸ§  ç„¦è™‘å†…è€—ä¸¥é‡ï¼Œåå¤çº ç»“è¿Ÿè¿Ÿæ— æ³•è¡ŒåŠ¨</div>
<button onclick="validatePain()">è¿›å…¥æ­£å¼æµ‹è¯• â†’</button>
</div>

<!-- STEP3 -->
<div id="step3" class="hidden">
<h2>ç¬¬ä¸‰æ­¥ï¼šæ­£å¼æµ‹è¯•</h2>
<p>è¯·å¡«å†™å§“åå’Œå¾®ä¿¡ï¼Œä»¥ä¾¿ä¿å­˜æµ‹è¯•ç»“æœï¼š</p>
<input type="text" id="name" placeholder="å§“å">
<input type="text" id="wechat" placeholder="å¾®ä¿¡">

<div class="progress-bar"><div class="progress" id="progress"></div></div>

<div id="quiz"></div>
<button onclick="calculate()">æäº¤æµ‹è¯•</button>
</div>

<!-- RESULT -->
<div id="result" class="hidden"></div>

</div>

<script>
// é£ä¹¦è¡¨å•
const FEISHU_FORM_URL="https://my.feishu.cn/share/base/form/shrcnpYsKT4EXDGoy1kaICHxQQc";

// æ­¥éª¤æ§åˆ¶
function nextStep(step){
  document.getElementById("step1").classList.add("hidden");
  document.getElementById("step2").classList.add("hidden");
  document.getElementById("step3").classList.add("hidden");
  document.getElementById("step"+step).classList.remove("hidden");
}

// éªŒè¯å›°å¢ƒå¤šé€‰
function validatePain(){
  let checked=document.querySelectorAll('input[name="pain"]:checked');
  if(checked.length>3){alert("æœ€å¤šé€‰æ‹©3é¡¹"); return;}
  nextStep(3);
}

// 15ä¸ªä¼˜åŠ¿ç¤ºä¾‹ï¼Œå¯æ‰©å±•åˆ°34ä¸ª
let strengths={
"å­¦ä¹ ":0,"æˆ˜ç•¥":0,"ä½“è°…":0,"æˆå°±":0,"åˆ†æ":0,
"æ²Ÿé€š":0,"è´£ä»»":0,"è¡ŒåŠ¨":0,"é€‚åº”":0,"ç»Ÿç­¹":0,
"ä¸“æ³¨":0,"ä¿¡å¿µ":0,"äº¤å¾€":0,"ç†å¿µ":0,"å®¡æ…":0
};

// 30é¢˜å®Œæ•´ç‰ˆï¼ˆç¤ºä¾‹å‰7é¢˜+è¡¥å…¨è‡³30é¢˜ï¼Œå¯ç»§ç»­æ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰
let questions=[
{type:2,text:"æˆ‘ç»å¸¸ä¸»åŠ¨å¯»æ‰¾æ–°çŸ¥è¯†ã€æ–°è¯¾ç¨‹æˆ–æ–°æŠ€èƒ½æ¥æå‡è‡ªå·±ã€‚",strength:"å­¦ä¹ "},
{type:2,text:"é¢å¯¹å¤æ‚é—®é¢˜ï¼Œæˆ‘ä¹ æƒ¯å…ˆæ•´ä½“æ€è€ƒè·¯å¾„ä¸æ–¹å‘ã€‚",strength:"æˆ˜ç•¥"},
{type:2,text:"æˆ‘å¾ˆå®¹æ˜“è§‰å¯Ÿåˆ°ä»–äººçš„æƒ…ç»ªå˜åŒ–ã€‚",strength:"ä½“è°…"},
{type:2,text:"å®Œæˆç›®æ ‡æœ¬èº«ä¼šå¸¦ç»™æˆ‘å¼ºçƒˆæ»¡è¶³æ„Ÿã€‚",strength:"æˆå°±"},
{type:2,text:"åšå†³ç­–å‰æˆ‘ä¼šåå¤æƒè¡¡é£é™©ã€‚",strength:"å®¡æ…"},
{type:4,text:"å½“é¢å¯¹æ–°æœºä¼šæ—¶ï¼Œæˆ‘é€šå¸¸ï¼š",options:[
["ç«‹åˆ»è¡ŒåŠ¨å°è¯•","è¡ŒåŠ¨"],["æ·±å…¥åˆ†æåˆ©å¼Š","åˆ†æ"],["å…ˆè€ƒè™‘é•¿æœŸæ–¹å‘","æˆ˜ç•¥"],["è¯¢é—®ä»–äººæ„Ÿå—","ä½“è°…"]
]},
{type:4,text:"å›¢é˜Ÿåˆ†å·¥æ··ä¹±æ—¶ï¼Œæˆ‘æ›´å¯èƒ½ï¼š",options:[
["ä¸»åŠ¨ç»Ÿç­¹åè°ƒ","ç»Ÿç­¹"],["è‡ªå·±é»˜é»˜æ‰¿æ‹…ä»»åŠ¡","è´£ä»»"],["é¼“èˆå£«æ°”æ²Ÿé€š","æ²Ÿé€š"],["ä¸“æ³¨å®Œæˆè‡ªå·±éƒ¨åˆ†","ä¸“æ³¨"]
]},
// ---- è¡¥å…¨å‰©ä½™23é¢˜ ----
// è¿™é‡Œç¤ºä¾‹ï¼Œä½ å¯ä»¥è‡ªå·±æ›¿æ¢æˆ–å¾®è°ƒæ–‡æ¡ˆ
{type:2,text:"æˆ‘å–œæ¬¢åœ¨å˜åŒ–ä¸­ä¿æŒçµæ´»ä¸é€‚åº”ã€‚",strength:"é€‚åº”"},
{type:2,text:"æˆ‘æ³¨é‡æ‰¿è¯ºä¸è´£ä»»æ„Ÿï¼Œåˆ«äººä¿¡ä»»æˆ‘ã€‚",strength:"è´£ä»»"},
{type:2,text:"æˆ‘å–œæ¬¢æ·±åº¦æ€è€ƒå¤æ‚é—®é¢˜ã€‚",strength:"åˆ†æ"},
{type:2,text:"æˆ‘æ“…é•¿ç”¨è¯­è¨€è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ã€‚",strength:"æ²Ÿé€š"},
{type:2,text:"æˆ‘å¯¹ç›®æ ‡æœ‰å¼ºçƒˆçš„æ‰§è¡ŒåŠ›ã€‚",strength:"è¡ŒåŠ¨"},
{type:2,text:"æˆ‘æ“…é•¿æ•´ç†å’Œå®‰æ’äº‹åŠ¡ã€‚",strength:"ç»Ÿç­¹"},
{type:2,text:"æˆ‘èƒ½å¤Ÿé«˜åº¦ä¸“æ³¨åœ¨é‡è¦ä»»åŠ¡ä¸Šã€‚",strength:"ä¸“æ³¨"},
{type:2,text:"æˆ‘æœ‰æ¸…æ™°çš„ä»·å€¼è§‚ï¼Œå¹¶åšæŒæ‰§è¡Œã€‚",strength:"ä¿¡å¿µ"},
{type:2,text:"æˆ‘æ“…é•¿ä¸ä¸åŒç±»å‹çš„äººå»ºç«‹è”ç³»ã€‚",strength:"äº¤å¾€"},
{type:2,text:"æˆ‘å–œæ¬¢æ€è€ƒç†å¿µå’Œæœªæ¥å¯èƒ½æ€§ã€‚",strength:"ç†å¿µ"},
{type:2,text:"æˆ‘åœ¨æ‰§è¡Œå‰ä¼šè°¨æ…è¯„ä¼°é£é™©ã€‚",strength:"å®¡æ…"},
{type:4,text:"åœ¨å›¢é˜Ÿè®¨è®ºä¸­ï¼Œæˆ‘æ›´å€¾å‘ï¼š",options:[
["æå‡ºç‹¬ç‰¹æƒ³æ³•","ç†å¿µ"],["å…³æ³¨æ•°æ®åˆ†æ","åˆ†æ"],["é¼“åŠ±åŒäº‹","ä½“è°…"],["è¿…é€Ÿå†³ç­–","è¡ŒåŠ¨"]
]},
{type:4,text:"é¢å¯¹æŒ‘æˆ˜ï¼Œæˆ‘æ›´å®¹æ˜“ï¼š",options:[
["åšå®šä¿¡å¿µåšæŒ","ä¿¡å¿µ"],["è§„åˆ’æ‰§è¡Œæ­¥éª¤","ç»Ÿç­¹"],["å¿«é€Ÿé€‚åº”","é€‚åº”"],["ä¿æŒä¸“æ³¨","ä¸“æ³¨"]
]},
{type:2,text:"æˆ‘å–œæ¬¢ç»´æŠ¤å›¢é˜Ÿå’Œè°ä¸å…³ç³»ã€‚",strength:"ä½“è°…"},
{type:2,text:"æˆ‘æ€»æ˜¯è¿½æ±‚å­¦ä¹ å’Œè‡ªæˆ‘æˆé•¿ã€‚",strength:"å­¦ä¹ "},
{type:2,text:"æˆ‘æ“…é•¿è¯†åˆ«æ–¹å‘å’Œæˆ˜ç•¥æœºä¼šã€‚",strength:"æˆ˜ç•¥"},
{type:2,text:"æˆ‘å¯¹é•¿æœŸç›®æ ‡æœ‰æŒç»­åŠ¨åŠ›ã€‚",strength:"æˆå°±"},
{type:2,text:"æˆ‘é‡è§†æ²Ÿé€šå’Œè¡¨è¾¾å¯¹å›¢é˜Ÿçš„å½±å“åŠ›ã€‚",strength:"æ²Ÿé€š"},
{type:2,text:"æˆ‘ä¼šä»”ç»†åˆ†ææ¯ä¸ªå†³ç­–çš„åˆ©å¼Šã€‚",strength:"åˆ†æ"},
{type:2,text:"æˆ‘èƒ½å¤Ÿå¿«é€Ÿé‡‡å–è¡ŒåŠ¨æ¨åŠ¨äº‹æƒ…è½åœ°ã€‚",strength:"è¡ŒåŠ¨"},
{type:2,text:"æˆ‘æ³¨é‡è§„åˆ™å’Œè´£ä»»å±¥è¡Œã€‚",strength:"è´£ä»»"},
{type:2,text:"æˆ‘å–œæ¬¢æœ‰æ¡ç†åœ°ç»„ç»‡å’Œå®‰æ’å·¥ä½œã€‚",strength:"ç»Ÿç­¹"},
{type:2,text:"æˆ‘èƒ½å¤Ÿçµæ´»åº”å¯¹å˜åŒ–å’ŒæŒ‘æˆ˜ã€‚",strength:"é€‚åº”"},
{type:2,text:"æˆ‘èƒ½å¤Ÿæ·±åº¦ä¸“æ³¨å®Œæˆå…³é”®ä»»åŠ¡ã€‚",strength:"ä¸“æ³¨"},
{type:2,text:"æˆ‘åšæŒè‡ªå·±çš„æ ¸å¿ƒä»·å€¼è§‚ã€‚",strength:"ä¿¡å¿µ"},
{type:2,text:"æˆ‘å–„äºå»ºç«‹ä¸ç»´æŠ¤äººé™…å…³ç³»ã€‚",strength:"äº¤å¾€"},
{type:2,text:"æˆ‘å–„äºæ€è€ƒæœªæ¥è¶‹åŠ¿å’Œç†å¿µã€‚",strength:"ç†å¿µ"}
];

let quizDiv=document.getElementById("quiz");
questions.forEach((q,i)=>{
  let div=document.createElement("div");
  div.className="card inactive";
  let html="<p>"+(i+1)+". "+q.text+"</p>";
  if(q.type==2){
    html+=`<input type="radio" name="q${i}" value="1"> ç¬¦åˆ
    <input type="radio" name="q${i}" value="0"> ä¸ç¬¦åˆ`;
  }else{
    q.options.forEach(opt=>{
      html+=`<div><input type="radio" name="q${i}" value="${opt[1]}"> ${opt[0]}</div>`;
    });
  }
  div.innerHTML=html;
  quizDiv.appendChild(div);
});

// æ˜¾ç¤ºç¬¬ä¸€å¼ å¡ç‰‡
let currentIndex=0;
let cards=document.querySelectorAll(".card");
if(cards.length>0) cards[0].classList.add("active");

// è¿›åº¦æ¡
function updateProgress(){
  let percent=((currentIndex)/questions.length)*100;
  document.getElementById("progress").style.width=percent+"%";
}

// ä¸‹ä¸€é¢˜è‡ªåŠ¨åˆ‡æ¢
cards.forEach((card,i)=>{
  let inputs=card.querySelectorAll("input[type=radio]");
  inputs.forEach(input=>{
    input.addEventListener("change",()=>{
      card.classList.remove("active");
      card.classList.add("inactive");
      currentIndex++;
      if(currentIndex<cards.length){
        cards[currentIndex].classList.add("active");
        updateProgress();
      }
    });
  });
});

// è®¡ç®—åˆ†æ•° & æäº¤
function calculate(){
  let name=document.getElementById("name").value.trim();
  let wechat=document.getElementById("wechat").value.trim();
  if(!name||!wechat){alert("è¯·å¡«å†™å§“åå’Œå¾®ä¿¡"); return;}
  // è®¡åˆ†
  questions.forEach((q,i)=>{
    let selected=document.querySelector(`input[name="q${i}"]:checked`);
    if(!selected) return;
    if(q.type==2 && selected.value=="1") strengths[q.strength]+=1;
    if(q.type==4) strengths[selected.value]+=1;
  });
  let sorted=Object.entries(strengths).sort((a,b)=>b[1]-a[1]);
  let top5=sorted.slice(0,5);
  let top10=sorted.slice(0,10);

  // æ„å»ºç»“æœæ˜¾ç¤º
  let intro={
    "å­¦ä¹ ":"æŒç»­æ¸´æœ›æˆé•¿ï¼Œå¯¹çŸ¥è¯†ä¿æŒé«˜åº¦çƒ­æƒ…ã€‚",
    "æˆ˜ç•¥":"æ“…é•¿ä»å¤æ‚å±€é¢ä¸­çœ‹æ¸…æ–¹å‘ã€‚",
    "ä½“è°…":"å¯¹ä»–äººæƒ…ç»ªæ•æ„Ÿï¼Œå¯Œæœ‰åŒç†å¿ƒã€‚",
    "æˆå°±":"å¼ºçƒˆé©±åŠ¨åŠ›ï¼Œå–œæ¬¢å®Œæˆä»»åŠ¡ã€‚",
    "åˆ†æ":"ç†æ€§æ€è€ƒï¼Œé‡è§†é€»è¾‘ä¸æ•°æ®ã€‚",
    "æ²Ÿé€š":"è¡¨è¾¾æ¸…æ™°ï¼Œå–„äºå½±å“ä»–äººã€‚",
    "è´£ä»»":"æ‰¿è¯ºæ„Ÿå¼ºï¼Œå€¼å¾—ä¿¡èµ–ã€‚",
    "è¡ŒåŠ¨":"æ‰§è¡Œè¿…é€Ÿï¼Œæ¨åŠ¨äº‹æƒ…å‘ç”Ÿã€‚",
    "é€‚åº”":"åœ¨å˜åŒ–ä¸­ä¿æŒç¨³å®šã€‚",
    "ç»Ÿç­¹":"å–„äºç»„ç»‡èµ„æºä¸æµç¨‹ã€‚",
    "ä¸“æ³¨":"é«˜åº¦èšç„¦ç›®æ ‡ã€‚",
    "ä¿¡å¿µ":"ä»·å€¼è§‚æ¸…æ™°åšå®šã€‚",
    "äº¤å¾€":"å–„äºå»ºç«‹æ·±åº¦å…³ç³»ã€‚",
    "ç†å¿µ":"çƒ­è¡·æ€è€ƒæ¦‚å¿µä¸å¯èƒ½æ€§ã€‚",
    "å®¡æ…":"è°¨æ…è¯„ä¼°é£é™©ã€‚"
  };

  let resultHTML="<h2>ä½ çš„ä¼˜åŠ¿ç»“æœ</h2><h3>âœ¨ å‰5å¤§æ ¸å¿ƒä¼˜åŠ¿</h3><ol>";
  top5.forEach(s=>{resultHTML+=`<li><b>${s[0]}</b><br><small>${intro[s[0]]}</small></li>`;});
  resultHTML+="</ol><h3>ğŸ”’ å…¶ä»–æ½œåœ¨ä¼˜åŠ¿</h3><div class='blur'><ol>";
  top10.slice(5,10).forEach(s=>{resultHTML+=`<li>${s[0]}</li>`;});
  resultHTML+="</ol></div>";
  resultHTML+=`<h3>ğŸ§  åˆæ­¥åˆ†æ</h3><p class='fade'>
  æ ¹æ®ä½ çš„ä¼˜åŠ¿ç»„åˆï¼Œå‰äº”ä¼˜åŠ¿æ˜¾ç¤ºä½ çš„æ ¸å¿ƒé©±åŠ¨åŠ›å’Œèƒ½åŠ›å€¾å‘ï¼Œåäº”æ½œåœ¨ä¼˜åŠ¿æä¾›è¡¥å……ä¿¡æ¯ï¼Œå¯¹èŒä¸šé€‰æ‹©å’Œä¸ªäººæˆé•¿æœ‰æŒ‡å¯¼æ„ä¹‰â€¦â€¦
  </p><p><b>è¯¦ç»†ä¼˜åŠ¿è§£è¯» + èŒä¸šè·¯å¾„å»ºè®®<br>æ¬¢è¿é¢„çº¦ä¸€å¯¹ä¸€æ·±åº¦å’¨è¯¢ã€‚</b></p>`;

  document.getElementById("result").innerHTML=resultHTML;
  document.getElementById("step3").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");

  // è‡ªåŠ¨æäº¤åˆ°é£ä¹¦
  let painChecked=document.querySelectorAll('input[name="pain"]:checked');
  let painText=Array.from(painChecked).map(c=>c.parentElement.textContent.trim()).join(" | ");
  let top5Text=top5.map(s=>s[0]).join(" | ");
  let top10Text=top10.map(s=>s[0]).join(" | ");
  let analysisText=resultHTML.replace(/<[^>]+>/g,''); // å»æ‰HTMLæ ‡ç­¾æäº¤çº¯æ–‡æœ¬

  let formData=new FormData();
  formData.append("å§“å",name);
  formData.append("å¾®ä¿¡",wechat);
  formData.append("å›°å¢ƒ",painText);
  formData.append("å‰äº”ä¼˜åŠ¿",top5Text);
  formData.append("å‰åä¼˜åŠ¿",top10Text);
  formData.append("å®Œæ•´çš„åˆ†ææ–‡å­—",analysisText);

  fetch(FEISHU_FORM_URL,{
    method:"POST",
    body:formData,
    mode:"no-cors"
  }).then(()=>{console.log("å·²æäº¤é£ä¹¦è¡¨å•");});
}
</script>
</body>
</html>
